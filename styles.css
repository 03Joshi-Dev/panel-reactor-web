:root {
    --bg-color: #f3f4f6; --card-bg-color: #ffffff; --text-color: #1f2937; --subtle-text-color: #6b7280;
    --border-color: #d1d5db; --tab-active-bg: #eef2ff; --blue-accent-bg: #eff6ff; --orange-accent-bg: #fff7ed;
    --button-secondary-bg: #e5e7eb; --input-bg-color: #ffffff; --input-text-color: #111827;
    --focus-ring: rgba(59,130,246,0.14);
}
html.dark {
    --bg-color: #111827; --card-bg-color: #1f2937; --text-color: #f9fafb; --subtle-text-color: #9ca3af;
    --border-color: #4b5563; --tab-active-bg: #312e81; --blue-accent-bg: #1e3a8a; --orange-accent-bg: #7c2d12;
    --button-secondary-bg: #374151; --input-bg-color: #374151; --input-text-color: #f9fafb;
    --focus-ring: rgba(99,102,241,0.12);
}
body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); }
.card { background-color: var(--card-bg-color); border-radius: 1rem; }
.modal-content {
    background-color: var(--card-bg-color); padding: 2.5rem; border-radius: 1rem; 
    width: 90%; max-width: 450px;
    box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}
.subtle-text { color: var(--subtle-text-color); }
.border-custom { border-color: var(--border-color); }
.input-custom {
    background-color: var(--input-bg-color); color: var(--input-text-color); border-width: 2px;
    border-style: solid; border-color: var(--border-color); padding: 0.5rem 0.75rem;
    border-radius: 0.5rem; width: 100%;
}
.tab-active { background-color: var(--tab-active-bg); }
.blue-accent { background-color: var(--blue-accent-bg); }
.orange-accent { background-color: var(--orange-accent-bg); }
.btn-secondary { background-color: var(--button-secondary-bg); }
.card-shadow { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
.accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
.checklist-item-detail { padding-left: 2.5rem; border-left: 2px solid var(--border-color); margin-left: 0.625rem; margin-top: 0.5rem; }
.verification-info { background-color: var(--blue-accent-bg); padding: 0.5rem; border-radius: 0.375rem; margin-top: 0.5rem; font-size: 0.875rem; }
.modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center; }
.status-dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 8px; }
.status-connected { background-color: #22c55e; }
.status-disconnected { background-color: #ef4444; }
.status-connecting { background-color: #eab308; }
.pdf-clone-container { position: absolute; top: 0; left: -9999px; width: 800px; padding: 1rem; background-color: var(--card-bg-color); }
.pdf-clone-container .accordion-content { max-height: none !important; }
.pdf-clone-container svg { display: none !important; }
@media print { body * { visibility: hidden; } #content-protocolo, #content-protocolo * { visibility: visible; } #content-protocolo { position: absolute; left: 0; top: 0; width: 100%; } .no-print { display: none; } .accordion-content { max-height: none !important; overflow: visible !important; } }
.emergency-section { background-color: #fff5f5; border: 1px solid #fca5a5; }
/* Use stronger red header with white text in light mode for contrast */
.emergency-header { background-color: #ef4444; color: #ffffff; }
@media (prefers-color-scheme: dark) {
    .emergency-section { background-color: #6b1414; border-color: #ef4444; }
    .emergency-header { background-color: #991b1b; color: #ffffff; }
}

/* Make sure the expanded content inside the emergency block remains light and legible in light mode */
.emergency-section .accordion-content {
    background-color: transparent; /* avoid overlaying with dark tints */
    color: var(--text-color);
}
.emergency-section .accordion-content p,
.emergency-section .accordion-content li,
.emergency-section .accordion-content .font-semibold,
.emergency-section .accordion-content .list-decimal,
.emergency-section .accordion-content .list-disc {
    color: var(--text-color);
}

/* Ensure the contacts box has explicit light background and readable text in light mode */
.emergency-section .bg-yellow-100 {
    background-color: #fef3c7 !important; /* slightly warmer yellow */
    color: var(--text-color) !important;
}
/* And in dark mode keep the dark yellow background but ensure text is light */
@media (prefers-color-scheme: dark) {
    .emergency-section .bg-yellow-100 {
        background-color: #a43e00 !important; /* intense orange for dark mode */
        color: #fff !important;
        box-shadow: 0 2px 6px rgba(0,0,0,0.4) !important;
    }
}

/* Strong overrides to prevent inheritance from other rules or inline styles
   but only apply to the expanded content area, not the header which must keep its own color. */
.emergency-section .accordion-content, .emergency-section .accordion-content * {
    background-color: inherit !important;
    color: inherit !important;
}

/* Explicitly enforce a light background and readable text for the emergency block in light mode */
html:not(.dark) .emergency-section {
    background-color: #fff5f5 !important;
    color: #1f2937 !important;
}

/* Selection inside emergency block: avoid full dark overlay when users select text */
.emergency-section ::selection {
    background: rgba(255, 235, 59, 0.18); /* soft yellow selection */
    color: #111827;
}

/* Strong overrides to neutralize any overlay, blending or opacity accidentally applied */
html:not(.dark) .accordion-item.emergency-section,
html:not(.dark) .accordion-item.emergency-section .accordion-content,
html:not(.dark) .accordion-item.emergency-section > .accordion-content,
html:not(.dark) .accordion-item.emergency-section > .emergency-header,
html:not(.dark) .accordion-item.emergency-section * {
    background-color: unset !important;
    background: unset !important;
    color: unset !important;
    opacity: 1 !important;
    mix-blend-mode: normal !important;
    filter: none !important;
}

/* Now explicitly set the desired light colors */
html:not(.dark) .accordion-item.emergency-section {
    background-color: #fff5f5 !important;
    border-color: #fca5a5 !important;
}
html:not(.dark) .accordion-item.emergency-section .emergency-header {
    background-color: #ef4444 !important; /* lighter red for better contrast */
    color: #ffffff !important;
}
html:not(.dark) .accordion-item.emergency-section .accordion-content {
    background-color: transparent !important;
    color: #1f2937 !important;
}

/* Ensure contact box is readable */
html:not(.dark) .accordion-item.emergency-section .bg-yellow-100 {
    background-color: #fef3c7 !important;
    color: #1f2937 !important;
}
/* Dark mode: ensure header is an intense red (good contrast with white text) */
html.dark .accordion-item.emergency-section .emergency-header {
    background-color: #991b1b !important; /* intense red for dark mode */
    color: #ffffff !important;
}
html.dark .accordion-item.emergency-section {
    background-color: #6b1414 !important;
    border-color: #ef4444 !important;
}
/* Asegurar que el bloque de la calculadora use el mismo color de texto que el protocolo/checklist */
#content-calculadora { color: var(--text-color); }
#content-calculadora h3, #content-calculadora label, #content-calculadora p, #content-calculadora .input-custom, #content-calculadora .card { color: var(--text-color); }
/* Forzar color en pestaña activa para evitar que la clase subtle-text deje la etiqueta gris */
.tab-btn.tab-active { color: var(--text-color); }
/* Igualar tamaños de fuente del bloque de la calculadora con el protocolo */
#content-calculadora h3 { font-size: 1.125rem; font-weight: 600; }
#content-calculadora p, #content-calculadora label { font-size: 0.875rem; }
#content-calculadora .card { font-size: 1rem; }

/* Small, subtle focus styles for accessibility (visible but less intense) */
.tab-btn:focus, .accordion-header:focus, .input-custom:focus {
    outline: none;
    box-shadow: 0 0 0 4px var(--focus-ring);
    border-color: var(--border-color);
    border-radius: 0.5rem;
}

/* Avoid showing the ring for pointer focus unless the browser indicates focus-visible */
.tab-btn:focus:not(:focus-visible), .accordion-header:focus:not(:focus-visible), .input-custom:focus:not(:focus-visible) {
    box-shadow: none;
}

/* Highest-priority dark-mode override for the emergency contacts box
   (ensures the element gets the intense orange regardless of previous inherit/unset rules) */
html.dark .accordion-item.emergency-section .accordion-content .bg-yellow-100,
html.dark .accordion-item.emergency-section .bg-yellow-100 {
    background-color: #a43e00 !important;
    color: #ffffff !important;
    box-shadow: 0 6px 18px rgba(0,0,0,0.45) !important;
    border-radius: 0.5rem !important;
}

/* Theme toggle (sun/moon) icon styling */
#theme-toggle { display: inline-flex; align-items: center; justify-content: center; }
#theme-toggle svg { width: 1.25rem; height: 1.25rem; fill: currentColor; }
/* Light mode: show dark icon color, subtle bg on hover */
html:not(.dark) #theme-toggle { color: #111827; }
html:not(.dark) #theme-toggle:hover { background-color: rgba(17,24,39,0.06); }
/* Dark mode: lighter icon and subtle bg on hover */
html.dark #theme-toggle { color: #f9fafb; }
html.dark #theme-toggle:hover { background-color: rgba(255,255,255,0.04); }
#theme-toggle:focus { box-shadow: 0 0 0 4px rgba(59,130,246,0.12); border-radius: 0.5rem; outline: none; }
